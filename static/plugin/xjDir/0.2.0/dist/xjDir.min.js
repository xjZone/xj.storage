/** xjDir(侧边目录列表) | V0.2.0 | Apache Licence 2.0 | 2018-2021 © XJ.Chen | https://github.com/xjZone/xjDir */
!function(a,b){"function"!=typeof define||void 0===define.amd&&void 0===define.cmd?"undefined"!=typeof module&&"object"==typeof exports?module.exports=b(require("jquery")):(Boolean(a)||(a=self),b(a.jQuery)):define(function(a){b(a("jquery"))})}(this,function(a){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,w,x,y,z,A,B,b=function(a,b){void 0===a.addEventListener?a.addListener(b):a.addEventListener("change",b)},c=function(a,b){void 0===a.removeEventListener?a.removeListener(b):a.removeEventListener("change",b)};[{name:xj.focus,js:"https://cdn.jsdelivr.net/gh/xjZone/xj.focus@0.3.0/dist/xj.focus.min.js",css:"https://cdn.jsdelivr.net/gh/xjZone/xj.focus@0.3.0/dist/xj.focus.min.css"},{name:xj.ripple,js:"https://cdn.jsdelivr.net/gh/xjZone/xj.ripple@0.3.0/dist/xj.ripple.min.js",css:"https://cdn.jsdelivr.net/gh/xjZone/xj.ripple@0.3.0/dist/xj.ripple.min.css"},{name:xj.operate,js:"https://cdn.jsdelivr.net/gh/xjZone/xj.operate@0.5.0/dist/xj.operate.min.js",css:""}].forEach(function(a){var b=null,c=null;void 0===a.name&&(""!==a.js&&(b=document.createElement("script"),b.setAttribute("async","async"),b.setAttribute("src",a.js),document.head.insertBefore(b,document.head.firstChild)),""!==a.css&&(c=document.createElement("link"),c.setAttribute("rel","stylesheet"),c.setAttribute("href",a.css),document.head.insertBefore(c,document.head.firstChild)))}),d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global,e=function(){},f="0.2.0",g="Dir",h={selector:".xjDir",autoCreate:!0,dispatchTime:"ready"},i={manual:!1,size:"md",color:"default",border:"right",spreadDuration:250,spreadEasing:"swing",activeSpread:!0,singleSpread:!1,foldedMode:!1,foldedQuery:!1,foldedMasker:!0,scrollActive:!0,scrollAlign:"middle",scrollMust:!1,scrollOffset:0,createRipple:!0,hoverUnfold:!1,keepScroll:!0,classString:"",styleObject:null,maskerClass:"",maskerStyle:null,createBefore:e,createAfter:e,foldedCallback:e,unfoldCallback:e,spreadCallback:e,shrinkCallback:e,anchorCallback:e,loadedCallback:e,autoDestroyTime:6e4,destroyCallback:e},void 0===d.xj&&(d.xj={}),void 0===d.xj[g]&&(d.xj[g]={}),void 0===d.xj[g].return&&(d.xj[g].return={}),void 0===d.xj[g].config&&(d.xj[g].config={}),void 0===d.xj[g].option&&(d.xj[g].option={}),d.xj[g].config[f]&&a.extend(h,d.xj[g].config[f]),d.xj[g].option[f]&&a.extend(i,d.xj[g].option[f]),j=d,k=j.document,l=k.documentElement,m=k.body,n=a(j),o=a(k),p=a(l),q=a(m),r=!1,s="ontouchstart"in j,t=void 0===document.documentMode?!1:!0,u="xjDir-",w=u+"spread",x=u+"active",y=u+"folded",z=u+"unfold",A=u+"loading",B=u+"disabled",a.fn.xjDir=function(h){var E,F,G,I,J,K,L,M,N,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,v=this.first(),C=v.get(0),D=v.attr("xj"+g+"Id");return D?d.xj[g].return[D]:(void 0===h&&(h={}),h=a.extend({},i,h),E=v.attr("xj"+g),E&&a.extend(h,eval("("+E+")")),r===!0&&h.manual===!0?void 0:(null===m&&(m=k.body,q=a(m)),null===l&&(l=k.documentElement,p=a(l)),F=Date.now()+"_"+String(Math.random()).slice(2,12),G="."+F,v.attr("xjDirId",F),I=v.parent(".xjScroll-main").closest(".xjScroll").attr("xjScrollId"),J=void 0===I?null:d.xj.Scroll.return[I],K=null===J?v:J.wrap,L=K.get(0),M=v.children("ul").first(),N=M.get(0),h.manual,P=h.size,Q=h.color,R=h.border,S=h.spreadDuration,T=h.spreadEasing,U=h.activeSpread,V=h.singleSpread,W=h.foldedMode,X=h.foldedQuery,Y=h.foldedMasker,Z=h.scrollActive,$=h.scrollAlign,_=h.scrollMust,ab=h.scrollOffset,bb=h.createRipple,cb=h.hoverUnfold,db=h.keepScroll,eb=h.classString,fb=h.styleObject,gb=h.maskerClass,hb=h.maskerStyle,ib=h.createBefore,jb=h.createAfter,kb=h.foldedCallback,lb=h.unfoldCallback,mb=h.spreadCallback,nb=h.shrinkCallback,ob=h.anchorCallback,pb=h.loadedCallback,qb=h.autoDestroyTime,rb=h.destroyCallback,"md"!==P&&v.addClass(u+P),"default"!==Q&&v.addClass(u+Q),"right"!==R&&v.addClass(u+"border-"+R),""!==eb&&v.addClass(eb),null!==fb&&v.css(fb),sb=a('<div class="xjDir-masker"></div>'),null!==hb&&sb.css(hb),""!==gb&&sb.addClass(gb),250!==S&&v.prepend('<style>.xjDir[xjDirId="'+F+'"] .xjDir-sign::before,'+'.xjDir[xjDirId="'+F+'"] .xjDir-sign::after{transition:transform '+S+"ms;}"+"</style>"),tb=function(){return M.find("li").not(".xjDir-divide")},ub=function(a){var b,c;Y&&(b=v.css("zIndex"),sb.css("zIndex",b-4),c=v.closest(".xjScroll").not("body"),0!==c.length&&c.css("zIndex",b),a===!0?q.append(sb):sb.remove())},vb=0,wb=0,xb=function(){zb.unfold(!0)},yb=function(a){var b=t===!1?a.relatedTarget:k.activeElement;null!==b&&a.currentTarget.contains(b)===!1&&zb.unfold(!1)},zb={id:F,version:f,self:v,that:v},zb.destroy=function(a){return rb(zb)===!1?!1:(delete d.xj[g].return[F],[n,o,p,q].forEach(function(a){a.off(G)}),a!==!1?v.remove():v.off(G).find("li > ul").off(G),(null===J?v:J.self).get(0).removeEventListener("focus",xb,!0),(null===J?v:J.self).get(0).removeEventListener("blur",yb,!0),X!==!1&&c(Bb,Ab),void 0!==Bb&&(Bb=void 0),null!==J&&J.self.off(G),ub(!1),void 0)},zb.reinit=function(){M.find("li > ul").each(function(){a(this).off("scroll"+G).on("scroll"+G,function(){this.scrollTop=0})}),bb===!0&&M.find("li").children("a").addClass("xj-ripple"),M.find("li.xjDir-loading").addClass(B),M.find("li.xjDir-loading").children("a").each(function(){var b=this,c=a(this),d=c.attr("tabIndex");b.hasAttribute("tabIndex")===!0&&c.attr("xjDirIndex",d),c.attr("tabIndex","-1")}),M.find("li.xjDir-disabled").not(".xjDir-loading").children("a").each(function(b,c){var f,d=c,e=a(c);e.children(".xjDir-sign").length>0||(f=e.attr("tabIndex"),d.hasAttribute("tabIndex")===!0&&e.attr("xjDirIndex",f),e.attr("tabIndex","-1"))})},zb.spread=function(b,c){var d,f,g,h,i,j,k,l,m;return 0===arguments.length?M.find(".xjDir-spread"):(d=a(b).closest("li"),void 0===c?d.hasClass(w):("toggle"===c&&(c=d.hasClass(w)===!0?!1:!0),f=d.children("ul"),f.stop(!0).css("display","block"),d[c?"addClass":"removeClass"](w),c===!1?f.animate({height:0},S,T,function(){f.css({display:"",height:""}),nb!==e&&nb(zb,d)}):(g=d.parent("ul"),h=g.parent("li"),"none"===g.css("display")?zb.spread(h,!0):(i=f.height(),j=f.css("height","auto").height(),i===j?f.css("height",0):f.css("height",i),f.animate({height:j},S,T,function(){f.css({display:"",height:""}),mb!==e&&mb(zb,d)}),V!==!1&&(k=d.find("li"),l=d.parentsUntil(M).filter("li"),m=tb().not(d).not(l).not(k),m.filter(".xjDir-spread").each(function(a,b){zb.spread(b,!1)})),void 0))))},zb.active=function(b,c){var d,e;return 0===arguments.length?M.find(".xjDir-active"):(d=a(b).closest("li"),void 0===c?d.hasClass(x):("toggle"===c&&(c=d.hasClass(x)===!0?!1:!0),c===!1?(d.parentsUntil(M).filter("li").removeClass(x),d.removeClass(x),void 0):(e=d.parentsUntil(M).filter("li"),M.find(".xjDir-active").not(e).removeClass(x),d.addClass(x),e.addClass(x),void 0)))},zb.loading=function(b,c){if(0===arguments.length)return M.find(".xjDir-loading");var d=a(b).closest("li");return void 0===c?d.hasClass(A):("toggle"===c&&(c=d.hasClass(A)===!0?!1:!0),c===!0?(d.addClass(A+" "+B),a.each(d.children("a"),function(b,c){var d=c,e=a(c),f=e.attr("tabIndex");d.hasAttribute("tabIndex")===!0&&d.setAttribute("xjDirIndex",f),e.attr("tabIndex","-1")})):(d.removeClass(A+" "+B),a.each(d.children("a"),function(b,c){var e=a(c),f=e.attr("xjDirIndex");void 0===f?e.removeAttr("tabIndex"):e.attr("tabIndex",xjDirIndex),e.removeAttr("xjDirIndex")})))},zb.disabled=function(b,c){if(0===arguments.length)return M.find(".xjDir-disabled");var d=a(b).closest("li");return void 0===c?d.hasClass(B):("toggle"===c&&(c=d.hasClass(B)===!0?!1:!0),c===!0?(d.addClass(B),d.children("a").each(function(b,c){var d=c,e=a(c),f=e.attr("tabIndex");e.children(".xjDir-sign").length>0||(d.hasAttribute("tabIndex")===!0&&e.attr("xjDirIndex",f),e.attr("tabIndex","-1"))})):(d.removeClass(B),d.children("a").each(function(b,c){var e=a(c),f=e.attr("xjDirIndex");void 0===f?e.removeAttr("tabIndex"):e.attr("tabIndex",xjDirIndex),e.removeAttr("xjDirIndex")})))},zb.spreadAll=function(b){if(0===arguments.length)return M.find("li.xjDir-spread").length>=M.find("li > ul").length?!0:!1;var c=a('<style>.xjDir[xjDirId="'+F+'"] .xjDir-sign::before, .xjDir[xjDirId="'+F+'"] .xjDir-sign::after{transition:none;}</style>');v.append(c),tb().each(function(){var c=a(this),d=c.children("ul");0!==d.length&&(d.get(0).clientHeight,b===!1?c.removeClass(w):b===!0?c.addClass(w):c.toggleClass(w))}),c.remove()},zb.scrollActive=function(){var g,h,i,j,k,l,m,n,o,p,q,r,e=zb.active(),f=e.last()[0];if(!(e.length<=0)){if(v.hasClass(y)===!0&&v.hasClass(z)===!1?f=e.first()[0]:e.each(function(){var b=a(this),c=b.parent("ul");"none"!==c.css("display")&&(f=b.get(0))}),null===J){if(C.clientHeight>=N.scrollHeight)return}else if(J.maxScrollX()<=0)return;if(g=null===J?v:J.wrap,h=g.get(0),i=_,j=$,k=ab,Array.prototype.slice.apply(arguments).forEach(function(a){"boolean"==typeof a?i=a:"string"==typeof a?j=a:"number"==typeof a&&(k=a)}),l=h.clientHeight,m=f.clientHeight,n=h.getBoundingClientRect().top,o=f.getBoundingClientRect().top,p=o-n,q=h.scrollTop,r=void 0,p>=0&&l-m>=p&&i===!1)return void 0;r=q+p,"middle"===j?r=r-l/2+m/2:"bottom"===j&&(r=r-l+m),h.scrollTop=r+k,null!==J&&J.scroll()}},zb.folded=function(a){var b=null===J?v:J.wrap,c=b.get(0),d=v.hasClass(y),f=null===J?v:J.self;return 0===arguments.length?d:("toggle"===a&&(a=d===!0?!1:!0),a===!0&&d===!1&&(s===!1&&cb===!0&&[["mouseenter",!0],["mouseleave",!1]].forEach(function(a){f.on(a[0]+G,function(){zb.unfold(a[1])})}),f.get(0).addEventListener("focus",xb,!0),f.get(0).addEventListener("blur",yb,!0),v.on("click"+G+"folded",function(){zb.unfold(!0)}),o.on("click"+G,function(a){C.contains(a.target)!==!0&&(J&&J.self[0].contains(a.target)===!0||zb.unfold(!1))}),db===!0&&(wb=c.scrollTop),v.removeClass(z),v.addClass(y),db===!0&&(c.scrollTop=vb),kb!==e&&kb(zb)),a===!1&&d===!0&&(s===!1&&cb===!0&&f.off("mouseenter"+G),s===!1&&cb===!0&&f.off("mouseleave"+G),f.get(0).removeEventListener("focus",xb,!0),f.get(0).removeEventListener("blur",yb,!0),v.off("click"+G+"folded"),o.off("click"+G),db===!0&&(vb=c.scrollTop),v.removeClass(y),v.removeClass(z),db===!0&&(c.scrollTop=wb),lb!==e&&lb(zb)),void 0)},zb.unfold=function(a){return void 0===a?v.hasClass(z):("toggle"===a&&(a=v.hasClass(z)===!0?!1:!0),a===!0&&v.hasClass(y)===!0&&v.hasClass(z)===!1&&(db===!0&&(vb=L.scrollTop),v.addClass(z),db===!0&&(L.scrollTop=wb),lb!==e&&lb(zb),ub(!0)),a===!1&&v.hasClass(y)===!0&&v.hasClass(z)===!0&&(db===!0&&(wb=L.scrollTop),v.removeClass(z),db===!0&&(L.scrollTop=vb),kb!==e&&kb(zb),ub(!1)),void 0)},ib!==e&&ib(zb),zb.reinit(),function(){W!==!1&&(v.removeClass(y),v.removeClass(z),zb.folded(!0))}(),function(){var a=zb.active();return 0===a.length?"0":(zb.active(a.last(),!0),U===!0&&(V===!0&&M.find(".xjDir-spread").removeClass(w),a.last().parentsUntil(M).filter("li").addClass(w)),Z===!0&&zb.scrollActive(),void 0)}(),Ab=e,Bb=void 0,X!==!1&&(Ab=function(a){if(a.matches===!0){if(zb.folded()===!0)return;return zb.folded(!0),void 0}if(a.matches===!1){if(zb.folded()===!1)return;return zb.folded(!1),void 0}},Bb=j.matchMedia(X),b(Bb,Ab)),v.on("click"+G,"a",function(b){var h,c=a(this),d=c.parent("li"),f=d.children("ul"),g=c.children(".xjDir-sign");return 0!==d.closest("."+B).length&&0===g.length?b.preventDefault():d.hasClass(A)===!0?b.preventDefault():0!==g.length?0===f.length?(pb!==e&&pb(zb,d),zb.loading(d,!0)):(d.hasClass(w)===!0?zb.spread(d,!1):zb.spread(d,!0),void 0):(zb.active(d,!0),ob!==e&&(h=ob(zb,d)),h===!1&&b.preventDefault(),void 0)}),Cb=void 0,-1!==qb&&(Cb=setInterval(function(){return m.contains(C)===!0?"still exist":(zb.destroy()!==!1&&clearInterval(Cb),void 0)},qb)),jb!==e&&jb(zb),d.xj[g].return[F]=zb))},a.xjDir=function(b){void 0===b&&(b={}),b=a.extend({},i,b);var c=[];return a(h.selector).not("[xjDirId]").each(function(){c.push(a(this).xjDir(b))}),c},function(){function b(){r=!0,a.xjDir(),r=!1}var c=a('script[src*="xjDir"]').attr("xjDir-manual");if(void 0!==c&&(h.autoCreate=!1),h.autoCreate!==!1)switch(h.dispatchTime){case"ready":a.isReady===!0?b():a(function(){b()});break;case"load":n.one("load",b);break;case"now":b()}}()});
